{"version":3,"sources":["server/schema/mutations/group.js"],"names":["g","type","name","fields","id","title","creater","member","action","updateGroup","args","resolve","root","group","saveAsync","then","ids","flatMap","m","findAsync","_id","$in","forEach","users","user","groups","push","findOneAsync","memberOut","memberIn","difference","idsOut","idsIn","splice","indexOf","recent","findIndex","r","sk","userId","emit","leave","join","toGroup","messages","message","removeAsync"],"mappings":"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","file":"group.js","sourceRoot":"../../../../../../.."}