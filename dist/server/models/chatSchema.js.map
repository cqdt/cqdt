{"version":3,"sources":["server/models/chatSchema.js"],"names":["FileSchema","Schema","fileName","type","String","default","trim","path","fileType","creater","ObjectId","ref","createdAt","Number","Date","getTime","GroupSchema","name","member","MessageSchema","from","toUser","toGroup","content","state","time","PhanCapSchema","phanCap","Types","Mixed","UserSchema","userId","nickName","avatar","groups","friends","recent","id","unread","last","del","status","login","first","statics","get","findById","execAsync","then","file","err","APIError","httpStatus","NOT_FOUND","Promise","reject","list","options","criteria","query","find","sort","group","message","page","limit","skip","listCol","col","column","getLast","findOne","user","updateUser","u","findUserId","tk","undefined","exports"],"mappings":"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","file":"chatSchema.js","sourceRoot":"../../../../.."}